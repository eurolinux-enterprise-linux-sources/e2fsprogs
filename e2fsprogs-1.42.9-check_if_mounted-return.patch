commit b3993825860a3c89fe2e66ab74dc59ab65be99c9
Author: Darrick J. Wong <darrick.wong@oracle.com>
Date:   Thu Dec 12 13:09:22 2013 -0500

    e2image: check return value from check_if_mounted()
    
    Signed-off-by: Darrick J. Wong <darrick.wong@oracle.com>
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>

Index: e2fsprogs-1.41.12/misc/e2image.c
===================================================================
--- e2fsprogs-1.41.12.orig/misc/e2image.c
+++ e2fsprogs-1.41.12/misc/e2image.c
@@ -1287,7 +1287,11 @@ int main (int argc, char ** argv)
 	device_name = argv[optind];
 	image_fn = argv[optind+1];
 
-	ext2fs_check_if_mounted(device_name, &mount_flags);
+	retval = ext2fs_check_if_mounted(device_name, &mount_flags);
+	if (retval) {
+		com_err(program_name, retval, "checking if mounted");
+		exit(1);
+	}
 
 	if (img_type && !ignore_rw_mount &&
 	    (mount_flags & EXT2_MF_MOUNTED) &&
